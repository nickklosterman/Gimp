

(define (script-fu-expand-contract-disp-map theImage drawable )

  (let* (

;create undo group 
 (gimp-image-undo-group-start theImage)
(gimp-levels-auto drawable )
(gimp-levels drawable 0 0 255 1.0 0 127)
 (gimp-image-undo-group-end theImage)

    (gimp-displays-flush)
    )
  )
(script-fu-register "script-fu-expand-contract-displ-map"
                    _"<Image>/Script-Fu/AnaglyphTools/CreateRedCyanLayers"
                    "Processes an image and depth-map into a red-cyan anaglyph.Background as bottommost layer, disp map as topmost layer" ; works best if disp map is scaled using curves to 0-127 vs 0-255
                    "InkyDinky"
                    "InkyDinky"
                    "2011 11 7"
                    "*"
                    SF-IMAGE        "Image"     0
                    SF-DRAWABLE     "Drawable"  0
;		    SF-ADJUSTMENT "X/Radial Displacement Offset (pixels)" (list 20 0 60 1 10 0 SF-SLIDER )
;		    SF-ADJUSTMENT "Y/Tangent Displacement Offset (pixels)" (list 0 0 60 1 10 0 SF-SLIDER )
;		    SF-OPTION "Displacement Mode"  '("Cartesian" "Polar");this doesn't do anything
	;	    SF-OPTION "Edge Behavior"  '("Wrap" "Smear" "Black")

                    )

;script to creat array of 256 zeroes to remove channels.
;#!/bin/bash                                                                                                                                                   ;  
;x=0
;while [ $x -lt 256 ]
;do
;echo "(aset points $x 0)"
;let "x+=1"
;done;
